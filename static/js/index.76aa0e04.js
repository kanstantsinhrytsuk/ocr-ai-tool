(()=>{"use strict";var e={753:function(e,t,r){var n,l=r(5893),a=r(7294),i=r(745),s=r(8106),o=r(3400),c=r(3991),u=r(7884),d=r(7230),f=r(6881),h=((n={}).Success="success",n.Error="error",n);let p=e=>{let t=new FileReader;return new Promise((r,n)=>{t.readAsDataURL(e),t.onload=()=>{r(t.result)},t.onerror=e=>n(e)})},g=(0,r(7637).N)({apiKey:"nr821rD83J23bAuKD9777rPqQqfxA0AA"}),x=async e=>{let{fileURL:t,targetFile:r}=e,n=(null==r?void 0:r.name)?await p(r):t;try{if(!n)throw Error("Please provide all required data");if(!1===g.isInitialized)throw g.error||Error("Prescription Understanding service is not initialized");let e=await g.service.understand({source:(null==r?void 0:r.name)?"base64":"url",file:n,documentType:"image"});return console.log({result:e}),{status:h.Success,data:e}}catch(e){return{status:h.Error,data:{message:e.message}}}};var m=r(1035),v=r(9126),j=r(3309),y=r(7454);let b=e=>{let{defaultValue:t=[],setFile:r}=e,[n,l]=(0,a.useState)(t),i=(0,a.useRef)(null);(0,a.useEffect)(()=>{n.length?r(n[0]):r(null)},[n]),(0,a.useEffect)(()=>{if(n.length){let e=new DataTransfer;n.map(t=>e.items.add(t)),i.current.files=e.files}else i.current.value=""},[n]),(0,a.useEffect)(()=>{let e=i.current;return e.addEventListener("change",s),e.addEventListener("cancel",o),()=>{e.removeEventListener("change",s),e.removeEventListener("cancel",o)}},[]);let s=e=>{let t=e.target.files;t&&t.length>0?l(Array.from(t)):l([])},o=()=>{l([])};return{files:n,handleChange:s,handleRemove:e=>()=>{l(n.filter(t=>t.name!==e.name))},fileInputRef:i}},O=e=>{let{defaultValue:t,setFile:r,setFileURL:n}=e,{files:i,fileInputRef:s,handleRemove:u}=b({defaultValue:t?[t]:[],setFile:r}),[f,h]=(0,a.useState)(null),[p,g]=(0,a.useState)({x:0,y:0}),x=(0,a.useRef)(null);return(0,a.useEffect)(()=>{if(i.length>0){let e=i[0];if(e.type.startsWith("image/")){let t=URL.createObjectURL(e);return h(t),()=>URL.revokeObjectURL(t)}}else h(null)},[i]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(o.Z,{direction:"row",spacing:2,children:[(0,l.jsx)(j.Z,{fullWidth:!0,disabled:i.length,type:"url",name:"fileURL",label:"URL",onChange:e=>n(e.target.value)}),(0,l.jsxs)(d.Z,{component:"label",variant:"contained",tabIndex:-1,sx:{width:200,height:55},children:["Choose file",(0,l.jsx)("input",{style:{display:"none"},type:"file",name:"targetFile",accept:"image/*,application/pdf",ref:s})]})]}),null==i?void 0:i.map(e=>(0,l.jsxs)(o.Z,{direction:"row",alignItems:"center",gap:1,children:[(0,l.jsx)("strong",{children:e.name}),(0,l.jsx)(m.Z,{"aria-label":"delete",onClick:u(e),color:"primary",children:(0,l.jsx)(y.Z,{})})]},e.name)),f&&(0,l.jsx)(c.Z,{sx:{mt:2,mb:2},children:(0,l.jsx)(v.Z,{elevation:3,sx:{p:2,height:"auto",width:"100%",overflow:"hidden",mx:"auto"},children:(0,l.jsx)(c.Z,{ref:x,onMouseMove:e=>{if(x.current){let{left:t,top:r,width:n,height:l}=x.current.getBoundingClientRect();g({x:(e.clientX-t)/n*100,y:(e.clientY-r)/l*100})}},sx:{display:"flex",justifyContent:"center",overflow:"hidden",cursor:"zoom-in","&:hover img":{transform:"scale(2.5)"}},children:(0,l.jsx)("img",{src:f,alt:"File preview",style:{maxWidth:"100%",objectFit:"contain",transition:"transform 0.3s ease",transformOrigin:`${p.x}% ${p.y}%`}})})})})]})};var w=r(5171),R=r.n(w),E=r(6847);let L=(0,E.ZP)("div")`
  padding: 16px;
  background-color: ${e=>{let{status:t}=e;return t===h.Error?"#f5dfe0":"#f1fff3"}};
  color: ${e=>{let{status:t}=e;return t===h.Error?"#4c0e16":"#01480a"}};
`,Z=e=>{let{result:t}=e,{status:r,data:n}=t;return r===h.Error?(0,l.jsx)(L,{status:r,children:n.message||"An error occurred"}):(0,l.jsx)(L,{status:r,children:(0,l.jsx)(R(),{src:n})})},S=function(){let[e,t]=(0,a.useState)(!1),[r,n]=(0,a.useState)({status:"",data:""}),[i,s]=(0,a.useState)({fileURL:"",targetFile:null}),h=async e=>{e.preventDefault(),t(!0),n(await x({targetFile:i.targetFile,fileURL:i.fileURL})),t(!1)};return(0,l.jsxs)(o.Z,{paddingY:2,children:[(0,l.jsx)("h1",{style:{textAlign:"center"},children:"OCR AI Tool (Document Understanding lib)"}),(0,l.jsxs)(c.Z,{sx:{display:"flex",flexDirection:"row",gap:10,alignItems:"center",justifyContent:"center",flexWrap:"wrap"},children:[(0,l.jsxs)("form",{style:{marginBottom:20,width:600,maxWidth:"100%"},onSubmit:h,children:[(0,l.jsxs)(u.Z,{sx:{display:"flex",gap:2},children:[(0,l.jsx)(O,{defaultValue:i.targetFile,setFile:e=>{s({...i,targetFile:e})},setFileURL:e=>{s({...i,fileURL:e})}}),(0,l.jsx)(d.Z,{variant:"contained",type:"submit",disabled:e,children:"Process"})]}),e&&(0,l.jsx)(f.Z,{})]}),!e&&r.status&&(0,l.jsx)(Z,{result:r})]})]})};i.createRoot(document.getElementById("root")).render((0,l.jsx)(a.StrictMode,{children:(0,l.jsx)(()=>(0,l.jsx)(s.Z,{children:(0,l.jsx)(S,{})}),{})}))}},t={};function r(n){var l=t[n];if(void 0!==l)return l.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}r.m=e,r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(n,l){if(1&l&&(n=this(n)),8&l||"object"==typeof n&&n&&(4&l&&n.__esModule||16&l&&"function"==typeof n.then))return n;var a=Object.create(null);r.r(a);var i={};e=e||[null,t({}),t([]),t(t)];for(var s=2&l&&n;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(e=>{i[e]=()=>n[e]});return i.default=()=>n,r.d(a,i),a}})(),r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e=[];r.O=(t,n,l,a)=>{if(n){a=a||0;for(var i=e.length;i>0&&e[i-1][2]>a;i--)e[i]=e[i-1];e[i]=[n,l,a];return}for(var s=1/0,i=0;i<e.length;i++){for(var[n,l,a]=e[i],o=!0,c=0;c<n.length;c++)(!1&a||s>=a)&&Object.keys(r.O).every(e=>r.O[e](n[c]))?n.splice(c--,1):(o=!1,a<s&&(s=a));if(o){e.splice(i--,1);var u=l();void 0!==u&&(t=u)}}return t}})(),r.rv=()=>"1.3.12",(()=>{var e={980:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var l,a,[i,s,o]=n,c=0;if(i.some(t=>0!==e[t])){for(l in s)r.o(s,l)&&(r.m[l]=s[l]);if(o)var u=o(r)}for(t&&t(n);c<i.length;c++)a=i[c],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(u)},n=self.webpackChunkocr_ai_tool=self.webpackChunkocr_ai_tool||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),r.ruid="bundler=rspack@1.3.12";var n=r.O(void 0,["361","135"],function(){return r(753)});n=r.O(n)})();