(()=>{"use strict";var e={5923:function(e,t,r){r.a(e,async function(e,i){try{r.d(t,{Z:()=>c});var n=r(5893);r(7294);var o=r(8106),a=r(9506),s=e([a]);a=(s.then?(await s)():s)[0];let c=()=>(0,n.jsx)(o.Z,{children:(0,n.jsx)(a.Z,{})});i()}catch(e){i(e)}})},737:function(e,t,r){r.d(t,{q:()=>n});var i,n=((i={}).Success="success",i.Error="error",i)},2287:function(e,t,r){r.d(t,{D:()=>i});let i={prompt:"",schemaFile:new File([JSON.stringify(JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","title":"Prescription","description":"Schema for structuring glasses prescription information based on instructions.","type":"object","properties":{"patient":{"type":"object","description":"Information about the patient.","properties":{"firstName":{"type":"string","description":"Patient\'s first name."},"lastName":{"type":"string","description":"Patient\'s last name."},"birthdate":{"type":"string","format":"date","description":"Patient\'s birth date in YYYY-MM-DD format."}},"required":["firstName","lastName"]},"prescriber":{"type":"object","description":"Information about the prescriber.","properties":{"fullName":{"type":"string","description":"Full name of the prescriber/doctor."},"email":{"type":"string","format":"email","description":"Prescriber\'s email address."},"address":{"type":"string","description":"Address of the prescriber\'s office."},"adeliNumber":{"type":"string","description":"ADELI identification number, format: 0-9 digits.","pattern":"\\\\b0?\\\\d{9}\\\\b"}},"required":["fullName"]},"prescription":{"type":"object","description":"Details of the prescription.","properties":{"prescribedAt":{"type":"string","format":"date","description":"Date when prescription was issued in YYYY-MM-DD format."},"expirationDate":{"type":"string","format":"date","description":"End date of validity period in YYYY-MM-DD format."},"right":{"type":"object","description":"Prescription for right eye (OD - Œil droit).","properties":{"visionType":{"type":"string","enum":["VL","VP"],"description":"Type of vision correction: VL (far vision), VP (near vision)."},"sphere":{"type":"number","description":"Spherical correction, range from -20 to +20."},"cylinder":{"type":"number","description":"Cylindrical correction, range from -10 to 0."},"axis":{"type":"number","description":"Axis value, range from 0 to 180."},"add":{"type":"number","description":"Addition value, range from 0 to 4."},"deg":{"type":"number","description":"Degression value, range from 0 to 360."},"base":{"type":"string","enum":["IN","OUT","UP","DOWN"],"description":"Direction of the base."},"pd":{"type":"number","description":"Pupillary distance in mm for right eye."},"va":{"type":"string","description":"Visual acuity for right eye."}},"required":["visionType","sphere","cylinder","axis"]},"left":{"type":"object","description":"Prescription for left eye (OG - Œil gauche).","properties":{"visionType":{"type":"string","enum":["VL","VP"],"description":"Type of vision correction: VL (far vision), VP (near vision)."},"sphere":{"type":"number","description":"Spherical correction, range from -20 to +20."},"cylinder":{"type":"number","description":"Cylindrical correction, range from -10 to 0."},"axis":{"type":"number","description":"Axis value, range from 0 to 180."},"add":{"type":"number","description":"Addition value, range from 0 to 4."},"deg":{"type":"number","description":"Degression value, range from 0 to 360."},"base":{"type":"string","enum":["IN","OUT","UP","DOWN"],"description":"Direction of the base."},"pd":{"type":"number","description":"Pupillary distance in mm for left eye."},"va":{"type":"string","description":"Visual acuity for left eye."}},"required":["visionType","sphere","cylinder","axis"]},"treatment":{"type":"string","description":"Special treatments or filters for lenses."},"tint":{"type":"string","description":"Color or tint applied to lenses."}},"required":["prescribedAt","visionType","right","left"]}},"required":["patient","prescriber","prescription"]}'))],"prescription-schema.json",{type:"application/json"}),targetFile:null}},9216:function(e,t,r){r.d(t,{E:()=>i});let i="mistral"},1523:function(e,t,r){r.a(e,async function(e,i){try{r.d(t,{P:()=>l});var n=r(737),o=r(4913),a=r(8071),s=r(4945),c=e([o]);o=(c.then?(await c)():c)[0];let l=async e=>{let{prompt:t,schemaFile:r,fileURL:i,targetFile:c}=e,l=(null==r?void 0:r.name)?await (0,s.m)(r):null,d=(null==c?void 0:c.name)?await (0,a.y)(c):i;try{if(!t||!d)throw Error("Please provide all required data");let e=await o.Z.getContentByFile({prompt:t,schema:l,file:d});if(!e)throw Error("No data found");return{status:n.q.Success,message:e}}catch(e){return{status:n.q.Error,message:e.message}}};i()}catch(e){i(e)}})},7182:function(e,t,r){r.d(t,{Z:()=>c});var i=r(5893);r(7294);var n=r(7245),o=r(6847),a=r(737);let s=(0,o.ZP)("div")`
  padding: 16px;
  background-color: ${e=>{let{status:t}=e;return t===a.q.Error?"#f5dfe0":"#f1fff3"}};
  color: ${e=>{let{status:t}=e;return t===a.q.Error?"#4c0e16":"#01480a"}};
`,c=e=>{let{result:t}=e,{status:r,message:o}=t;return(0,i.jsx)(s,{status:r,children:(0,i.jsx)(n.UG,{children:o})})}},6092:function(e,t,r){r.d(t,{$:()=>p});var i=r(5893);r(7294);var n=r(9719),o=r(7230),a=r(1035),s=r(9599),c=r(7454),l=r(1121);let d=e=>{let t=URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download=e.name,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)},p=e=>{let{defaultValue:t,setFile:r}=e,{files:p,fileInputRef:u,handleRemove:f}=(0,l.j)({defaultValue:[t],setFile:r});return(0,i.jsxs)(n.Z,{direction:"row",spacing:2,marginBottom:2,children:[(0,i.jsxs)(o.Z,{component:"label",variant:"contained",tabIndex:-1,sx:{width:200,height:55},children:["Choose schema",(0,i.jsx)("input",{style:{display:"none"},type:"file",name:"schemaFile",accept:"application/json",ref:u})]}),null==p?void 0:p.map(e=>(0,i.jsxs)(n.Z,{direction:"row",alignItems:"center",gap:2,children:[(0,i.jsx)("strong",{children:e.name}),(0,i.jsxs)(n.Z,{direction:"row",children:[(0,i.jsx)(a.Z,{"aria-label":"delete",onClick:()=>d(e),color:"primary",children:(0,i.jsx)(s.Z,{})}),(0,i.jsx)(a.Z,{"aria-label":"delete",onClick:f(e),color:"primary",children:(0,i.jsx)(c.Z,{})})]})]},e.name))]})}},5861:function(e,t,r){r.d(t,{w:()=>d});var i=r(5893);r(7294);var n=r(7230),o=r(1035),a=r(9719),s=r(483),c=r(7454),l=r(1121);let d=e=>{let{defaultValue:t,setFile:r}=e,{files:d,fileInputRef:p,handleRemove:u}=(0,l.j)({defaultValue:t?[t]:[],setFile:r});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(a.Z,{direction:"row",spacing:2,children:[(0,i.jsx)(s.Z,{fullWidth:!0,disabled:d.length,type:"url",name:"fileURL",label:"URL"}),(0,i.jsxs)(n.Z,{component:"label",variant:"contained",tabIndex:-1,sx:{width:200,height:55},children:["Choose file",(0,i.jsx)("input",{style:{display:"none"},type:"file",name:"targetFile",accept:"image/*,application/pdf",ref:p})]})]}),null==d?void 0:d.map(e=>(0,i.jsxs)(a.Z,{direction:"row",alignItems:"center",gap:1,children:[(0,i.jsx)("strong",{children:e.name}),(0,i.jsx)(o.Z,{"aria-label":"delete",onClick:u(e),color:"primary",children:(0,i.jsx)(c.Z,{})})]},e.name))]})}},9506:function(e,t,r){r.a(e,async function(e,i){try{r.d(t,{Z:()=>b});var n=r(5893),o=r(9719),a=r(7884),s=r(483),c=r(7230),l=r(6881),d=r(7294),p=r(2287),u=r(1523),f=r(6092),m=r(5861),y=r(7182),h=e([u]);u=(h.then?(await h)():h)[0];let b=function(){let e,[t,r]=(0,d.useState)(!1),[i,h]=(0,d.useState)({status:"",message:""}),[b,g]=(0,d.useState)({prompt:p.D.prompt,fileURL:"",schemaFile:p.D.schemaFile,targetFile:p.D.targetFile}),v=e=>t=>{g({...b,[e]:t})},j=async e=>{e.preventDefault(),r(!0);let t=await (0,u.P)(b);h(t),r(!1)};return(0,n.jsxs)(o.Z,{paddingY:2,children:[(0,n.jsx)("h1",{children:"OCR AI Tool"}),(0,n.jsx)("form",{style:{marginBottom:20},onSubmit:j,children:(0,n.jsxs)(a.Z,{sx:{display:"flex",gap:2},children:[(0,n.jsx)(s.Z,{required:!0,fullWidth:!0,multiline:!0,defaultValue:b.prompt,name:"prompt",label:"Prompt",onChange:(e="prompt",t=>{g({...b,[e]:t.target.value})})}),(0,n.jsx)(f.$,{defaultValue:b.schemaFile,setFile:v("schemaFile")}),(0,n.jsx)(m.w,{defaultValue:b.targetFile,setFile:v("targetFile")}),(0,n.jsx)(c.Z,{variant:"contained",type:"submit",disabled:t,children:"Process"})]})}),t&&(0,n.jsx)(l.Z,{}),!t&&i.status&&(0,n.jsx)(y.Z,{result:i})]})};i()}catch(e){i(e)}})},1121:function(e,t,r){r.d(t,{j:()=>n});var i=r(7294);let n=e=>{let{defaultValue:t=[],setFile:r}=e,[n,o]=(0,i.useState)(t),a=(0,i.useRef)(null);(0,i.useEffect)(()=>{n.length?r(n[0]):r(null)},[n]),(0,i.useEffect)(()=>{if(n.length){let e=new DataTransfer;n.map(t=>e.items.add(t)),a.current.files=e.files}else a.current.value=""},[n]),(0,i.useEffect)(()=>{let e=a.current;return e.addEventListener("change",s),e.addEventListener("cancel",c),()=>{e.removeEventListener("change",s),e.removeEventListener("cancel",c)}},[]);let s=e=>{let t=e.target.files;t&&t.length>0?o(Array.from(t)):o([])},c=()=>{o([])};return{files:n,handleChange:s,handleRemove:e=>()=>{o(n.filter(t=>t.name!==e.name))},fileInputRef:a}}},7938:function(e,t,r){r.a(e,async function(e,t){try{var i=r(5893),n=r(7294),o=r(745),a=r(5923),s=e([a]);a=(s.then?(await s)():s)[0],o.createRoot(document.getElementById("root")).render((0,i.jsx)(n.StrictMode,{children:(0,i.jsx)(a.Z,{})})),t()}catch(e){t(e)}})},4913:function(e,t,r){r.a(e,async function(e,i){try{r.d(t,{Z:()=>s}),r(9216);var n=r(6333),o=e([n]);n=(o.then?(await o)():o)[0];let a={getContentByFile:(0,n.A)("mistral").getContentByFile};Object.freeze(a);let s=a;i()}catch(e){i(e)}})},6333:function(e,t,r){r.a(e,async function(e,i){try{r.d(t,{A:()=>n});let e={mistral:await Promise.all([r.e("885"),r.e("118")]).then(r.bind(r,9105))},n=t=>{if(!e[t])throw Error(`Strategy ${t} not found`);return e[t]};i()}catch(e){i(e)}},1)},8071:function(e,t,r){r.d(t,{y:()=>i});let i=e=>{let t=new FileReader;return new Promise((r,i)=>{t.readAsDataURL(e),t.onload=()=>r(t.result),t.onerror=e=>i(e)})}},4945:function(e,t,r){r.d(t,{m:()=>i});let i=async e=>{let t=new FileReader;return new Promise((r,i)=>{t.readAsText(e),t.onload=()=>r(t.result),t.onerror=e=>i(e)})}}},t={};function r(i){var n=t[i];if(void 0!==n)return n.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,r),o.exports}r.m=e,(()=>{var e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",i="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",n=e=>{e&&e.d<1&&(e.d=1,e.forEach(e=>e.r--),e.forEach(e=>e.r--?e.r++:e()))},o=r=>r.map(r=>{if(null!==r&&"object"==typeof r){if(r[e])return r;if(r.then){var o=[];o.d=0,r.then(e=>{a[t]=e,n(o)},e=>{a[i]=e,n(o)});var a={};return a[e]=e=>e(o),a}}var s={};return s[e]=function(){},s[t]=r,s});r.a=(r,a,s)=>{s&&((c=[]).d=-1);var c,l,d,p,u=new Set,f=r.exports,m=new Promise((e,t)=>{p=t,d=e});m[t]=f,m[e]=e=>{c&&e(c),u.forEach(e),m.catch(function(){})},r.exports=m,a(r=>{l=o(r);var n,a=()=>l.map(e=>{if(e[i])throw e[i];return e[t]}),s=new Promise(t=>{(n=()=>t(a)).r=0;var r=e=>e!==c&&!u.has(e)&&(u.add(e),e&&!e.d&&(n.r++,e.push(n)));l.map(t=>t[e](r))});return n.r?s:a()},e=>(e?p(m[i]=e):d(f),n(c))),c&&c.d<0&&(c.d=0)}})(),r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(i,n){if(1&n&&(i=this(i)),8&n||"object"==typeof i&&i&&(4&n&&i.__esModule||16&n&&"function"==typeof i.then))return i;var o=Object.create(null);r.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&n&&i;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(e=>{a[e]=()=>i[e]});return a.default=()=>i,r.d(o,a),o}})(),r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce((t,i)=>(r.f[i](e,t),t),[])),r.u=e=>"static/js/async/"+e+"."+({118:"65b083d9",885:"a26860ff"})[e]+".js",r.miniCssF=e=>""+e+".css",r.h=()=>"efb1290ddb4ec213",r.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="ocr-ai-tool:";r.l=function(i,n,o,a){if(e[i])return void e[i].push(n);if(void 0!==o)for(var s,c,l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var p=l[d];if(p.getAttribute("src")==i||p.getAttribute("data-webpack")==t+o){s=p;break}}s||(c=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.setAttribute("data-webpack",t+o),s.src=i),e[i]=[n];var u=function(t,r){s.onerror=s.onload=null,clearTimeout(f);var n=e[i];if(delete e[i],s.parentNode&&s.parentNode.removeChild(s),n&&n.forEach(function(e){return e(r)}),t)return t(r)},f=setTimeout(u.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=u.bind(null,s.onerror),s.onload=u.bind(null,s.onload),c&&document.head.appendChild(s)}})(),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e=[];r.O=(t,i,n,o)=>{if(i){o=o||0;for(var a=e.length;a>0&&e[a-1][2]>o;a--)e[a]=e[a-1];e[a]=[i,n,o];return}for(var s=1/0,a=0;a<e.length;a++){for(var[i,n,o]=e[a],c=!0,l=0;l<i.length;l++)(!1&o||s>=o)&&Object.keys(r.O).every(e=>r.O[e](i[l]))?i.splice(l--,1):(c=!1,o<s&&(s=o));if(c){e.splice(a--,1);var d=n();void 0!==d&&(t=d)}}return t}})(),r.p="./",r.rv=()=>"1.3.1",(()=>{var e={980:0};r.f.j=function(t,i){var n=r.o(e,t)?e[t]:void 0;if(0!==n)if(n)i.push(n[2]);else{var o=new Promise((r,i)=>n=e[t]=[r,i]);i.push(n[2]=o);var a=r.p+r.u(t),s=Error();r.l(a,function(i){if(r.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var o=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,n[1](s)}},"chunk-"+t,t)}},r.O.j=t=>0===e[t];var t=(t,i)=>{var n,o,[a,s,c]=i,l=0;if(a.some(t=>0!==e[t])){for(n in s)r.o(s,n)&&(r.m[n]=s[n]);if(c)var d=c(r)}for(t&&t(i);l<a.length;l++)o=a[l],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(d)},i=self.webpackChunkocr_ai_tool=self.webpackChunkocr_ai_tool||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),r.ruid="bundler=rspack@1.3.1";var i=r.O(void 0,["361","771"],function(){return r(7938)});i=r.O(i)})();